services:
  test:
    build:
      context: ../..
      dockerfile: tests/docker/Dockerfile.test
    environment:
      - NODE_ENV=test
      - REASONINGBANK_ENABLED=true
    command: >
      /bin/bash -c "
      echo 'ðŸ§ª ReasoningBank Integration Tests' &&
      echo '1. Initialize memory' &&
      ./bin/claude-flow agent memory init &&
      echo '2. Check status' &&
      ./bin/claude-flow agent memory status &&
      echo '3. List agents' &&
      ./bin/claude-flow agent agents | head -20 &&
      echo '4. ReasoningBank help' &&
      npx agentic-flow reasoningbank help &&
      echo '5. Verify database' &&
      sqlite3 .swarm/memory.db '.tables' &&
      echo 'âœ… All tests passed!'
      "
